/*jslint node: true, maxlen: 150, maxerr: 50, indent: 2 */"use strict";var phpFreeChat=function(e,t,n,r){function u(n,r){r&&r.serverUrl&&(r.packageUrl||(o.packageUrl=r.serverUrl+"/../package.json"),r.serverCheckUrl||(o.serverCheckUrl=r.serverUrl+"/../check.php")),this.element=n,this.options=t.extend({},o,r),this._defaults=o,this._name=i,e.init(this)}var i="phpfreechat",s=n.document,o={serverUrl:"../server",packageUrl:"../package.json",serverCheckUrl:"../check.php",loaded:null,loadTestData:!1,refresh_delay:5e3,focus_on_connect:!0,check_backlink:!0,show_powered_by:!0,use_post_wrapper:!0,check_server_config:!0,tolerated_network_errors:5};return t.fn[i]=function(e){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new u(this,e))})},e}(phpFreeChat||{},jQuery,window);"use strict";var phpFreeChat=function(e,t,n,r){return e.login=function(n,r){var i=n?{"Pfc-Authorization":"Basic "+e.base64.encode(n.login+":"+n.password)}:{},s=n?{email:n.email}:null;t.ajax({type:"GET",url:e.options.serverUrl+"/auth",headers:i,data:s}).done(function(n){t(e.element).trigger("pfc-login",[e,n]),r&&r(null,n)}).error(function(t){var i=null;try{i=JSON.parse(t.responseText).error}catch(s){}e.showAuthForm(n?i:null),r&&r(t)})},e.logout=function(n){t.ajax({type:e.options.use_post_wrapper?"POST":"DELETE",url:e.options.serverUrl+"/auth",data:e.options.use_post_wrapper?{_METHOD:"DELETE"}:null}).done(function(r){t(e.element).trigger("pfc-logout",[e,r]),n&&n(null,r)}).error(function(e){n&&n(e)})},e.showAuthForm=function(n){e.modalbox.open('<form>  <input type="text" name="login" placeholder="Login"/><br/>  <input type="submit" name="submit" value="Sign in" />'+(n?"<p>"+n+"</p>":"")+"</form>").submit(function(){var n=t(this).find("[name=login]").attr("value"),r=t(this).find("[name=password]").attr("value"),i=t(this).find("[name=email]").attr("value");return n?(e.login({login:n,password:r,email:i}),e.modalbox.close(!0),!1):!1}).find("[name=login]").focus()},e}(phpFreeChat||{},jQuery,window);"use strict";var phpFreeChat=function(e,t,n,r){return e.readPendingMessages=function(n){e.readPendingMessages.nb_network_error===r&&(e.readPendingMessages.nb_network_error=0),t.ajax({type:"GET",url:e.options.serverUrl+"/users/"+e.uid+"/msg/"}).done(function(t){e.readPendingMessages.nb_network_error=0,t.forEach(function(t,n){t.type=="join"?(e.users[t.sender]=t.body,e.appendUser(e.users[t.sender])):t.type=="leave"&&e.removeUser(t.sender),e.appendMessage(t)}),n&&setTimeout(function(){e.readPendingMessages(!0)},e.options.refresh_delay)}).error(function(t){e.readPendingMessages.nb_network_error++>e.options.network_error?e.showErrorsPopup(["Network error. Please reload the chat to continue."]):n&&setTimeout(function(){e.readPendingMessages(!0)},e.options.refresh_delay)})},e.join=function(n){t.ajax({type:e.options.use_post_wrapper?"POST":"PUT",url:e.options.serverUrl+"/channels/"+n+"/users/"+e.uid,data:e.options.use_post_wrapper?{_METHOD:"PUT"}:null}).done(function(t){e.clearUserList(),Object.keys(t).forEach(function(n){e.users[n]=t[n],e.appendUser(t[n])}),e.appendMessage({type:"join",sender:e.uid,body:"you joined the channel"}),e.readPendingMessages(!0)}).error(function(e){console.log(e)})},e.leave=function(n){t.ajax({type:e.options.use_post_wrapper?"POST":"DELETE",url:e.options.serverUrl+"/channels/"+n+"/users/"+e.uid,data:e.options.use_post_wrapper?{_METHOD:"DELETE"}:null}).done(function(t){e.clearUserList(),e.appendMessage({type:"leave",sender:e.uid})}).error(function(e){console.log(e)})},e.postToChannel=function(n,r){if(r==="")return!1;t.ajax({type:"POST",url:e.options.serverUrl+"/channels/"+n+"/msg/",contentType:"application/json; charset=utf-8",data:JSON.stringify({body:r})}).done(function(t){e.appendMessage(t)}).error(function(e){console.log(e)})},e.notifyThatWindowIsClosed=function(){console.log("notifyThatWindowIsClosed"),t.ajax({type:e.options.use_post_wrapper?"POST":"PUT",async:!1,url:e.options.serverUrl+"/users/"+e.uid+"/closed",data:e.options.use_post_wrapper?{_METHOD:"PUT"}:"1"}).done(function(){}).error(function(e){console.log(e)})},e.appendUser=function(n){n.id=n.id!==r?n.id:0,n.role=n.role!==r?n.role:"user",n.name=n.name!==r?n.name:"Guest "+Math.round(Math.random()*100),n.email=n.email!==r?n.email:"",n.active=n.active!==r?n.active:!0;var i=t(e.element).find(n.role=="admin"?"div.pfc-role-admin":"div.pfc-role-user"),s=t('              <li class="user">                <div class="status"></div>                <div class="name"></div>                <div class="avatar"></div>              </li>');n.name&&s.find("div.name").text(n.name),i.find("li").length===0&&s.addClass("first"),s.find("div.status").addClass(n.active?"st-active":"st-inactive");var o=[];t(e.element).find("div.pfc-users li.user").each(function(e,n){o.push(parseInt(t(n).attr("id").split("_")[1],10))});if(n.id===0)do n.id=Math.round(Math.random()*1e4);while(o.indexOf(n.id)!=-1);return n.id===0||o.indexOf(n.id)!=-1?0:(s.attr("id","user_"+n.id),i.find("ul").append(s),e.updateRolesTitles(),n.id)},e.removeUser=function(n){var r=t(e.element).find("#user_"+n).remove().length>0;return e.updateRolesTitles(),r},e.updateRolesTitles=function(){return},e.clearUserList=function(){return t(e.element).find("li.user").remove(),e.updateRolesTitles(),!0},e.appendMessage=function(n){n.from=n.type=="msg"?n.sender:"system",n.name=e.users[n.sender]!==r?e.users[n.sender].name:n.name,n.body=n.body!==r?n.body:"",n.timestamp=n.timestamp!==r?n.timestamp:Math.round((new Date).getTime()/1e3),n.date=(new Date(n.timestamp*1e3)).toLocaleTimeString(),n.type=="join"?n.body=n.name+" joined the channel":n.type=="leave"&&(n.body=n.name+" left the channel"+(n.body?" ("+n.body+")":""));var i=t(e.element).find(".pfc-messages .messages-group:last"),s=t(e.element).find(".pfc-messages"),o=null;i.attr("data-from")!=n.from&&(o=t('<div class="messages-group" data-stamp="" data-from="">       <div class="date"></div>       <div class="name"></div>     </div>'),n.from=="system"&&(o.addClass("system-message"),o.find(".name").remove(),o.find(".avatar").remove()),o.find(".name").text(n.name),o.attr("data-from",n.from),o.find(".date").text(n.date),o.attr("data-stamp",n.timestamp),s.append(o),i=o),n.body=t("<pre></pre>").text(n.body).html();var u=t('<div class="message"></div>').html(n.body);return i.append(u),i==o?s.scrollTop(s.scrollTop()+i.outerHeight()+10):s.scrollTop(s.scrollTop()+u.outerHeight()),u},e.setTopic=function(n){t(e.element).find(".pfc-topic-value").text(n)},e}(phpFreeChat||{},jQuery,window);"use strict";var phpFreeChat=function(e,t,n,r){return e.init=function(n){e.element=n.element,e.options=n.options,e.users={},e.channels={},e.uid=null,e.cid=null;if(e.options.check_backlink&&!e.hasBacklink())return;e.loadHTML(),e.loadResponsiveBehavior(),e.options.check_server_config?t.ajax({type:"GET",url:e.options.serverCheckUrl}).done(function(t){t&&t.length>0?e.showErrorsPopup(t):e.startChatLogic()}).error(function(){e.showErrorsPopup(["Unknown error"])}):e.startChatLogic()},e.startChatLogic=function(){e.login(),t(e.element).bind("pfc-login",function(e,n,r){n.uid=r.id,n.users[r.id]=r,n.cid="xxx",n.options.focus_on_connect&&t("div.pfc-compose textarea").focus(),n.join(n.cid)}),t(e.element).bind("pfc-logout",function(e,t,n){t.uid=null,t.clearUserList()})},e.hasBacklink=function(){var n=t('a[href="http://www.phpfreechat.net"]').length;return n?!0:(t(e.element).html('<div class="pfc-backlink"><p>Please insert the phpfreechat backlink somewhere in your HTML in order to load the chat. The attended backlink is:</p><pre>'+t("<div/>").text('<a href="http://www.phpfreechat.net">phpFreeChat: simple Web chat</a>').html()+"</pre>"+"</div>"),!1)},e.loadHTML=function(){t(e.element).html((e.options.loadTestData?'      <div class="pfc-content">':'      <div class="pfc-content pfc-notabs">')+'        <div class="pfc-tabs">'+"          <ul>"+(e.options.loadTestData?'            <li class="channel active">              <div class="icon"></div>              <div class="name">Channel 1</div>              <div class="close"></div>            </li>            <li class="channel">              <div class="icon"></div>              <div class="name">Channel 2</div>              <div class="close"></div>            </li>            <li class="pm">              <div class="icon"></div>              <div class="name">admin</div>              <div class="close"></div>            </li>            <li class="new-tab">              <div class="icon"></div>            </li>':"")+"          </ul>"+"        </div>"+""+'        <div class="pfc-topic">'+'          <a class="pfc-toggle-tabs"></a>'+'          <p><span class="pfc-topic-label">Topic:</span> <span class="pfc-topic-value">no topic for this channel</span></p>'+'          <a class="pfc-toggle-users"></a>'+"        </div>"+""+'        <div class="pfc-messages">'+'          <div class="pfc-message-mobile-padding"></div>'+(e.options.loadTestData?'          <div class="messages-group" data-stamp="1336815502" data-from="kerphi">            <div class="avatar"><img src="http://www.gravatar.com/avatar/ae5979732c49cae7b741294a1d3a8682?d=wavatar&s=30" alt="" /></div>            <div class="date">11:38:21</div>            <div class="name">kerphi</div>            <div class="message">123 <a href="#">test de lien</a></div>            <div class="message">456</div>          </div>          <div class="messages-group" data-stamp="1336815503" data-from="admin">            <div class="avatar"><img src="http://www.gravatar.com/avatar/00000000000000000000000000000001?d=wavatar&s=30" alt="" /></div>            <div class="date">11:38:22</div>            <div class="name">admin</div>            <div class="message">Hello</div>            <div class="message">World</div>            <div class="message">!</div>            <div class="message">A very very very very very very very very very very very very very very very very very very very long text</div>          </div>':"")+"        </div>"+""+'        <div class="pfc-users">'+'          <div class="pfc-role-admin">'+'            <p class="role-title">Administrators</p>'+"            <ul>"+(e.options.loadTestData?'              <li class="first">                <div class="status st-active"></div>                <div class="name">admin</div>                <div class="avatar"><img src="http://www.gravatar.com/avatar/00000000000000000000000000000001?d=wavatar&s=20" alt="" /></div>              </li>':"")+"            </ul>"+"          </div>"+'          <div class="pfc-role-user">'+'            <p class="role-title">Users</p>'+"            <ul>"+(e.options.loadTestData?'              <li class="first">                <div class="status st-active"></div>                <div class="name myself">kerphi</div>                <div class="avatar"><img src="http://www.gravatar.com/avatar/ae5979732c49cae7b741294a1d3a8682?d=wavatar&s=20" alt="" /></div>              </li>              <li>                <div class="status st-inactive"></div>                <div class="name">St√©phane Gully</div>                <div class="avatar"><img src="http://www.gravatar.com/avatar/00000000000000000000000000000002?d=wavatar&s=20" alt="" /></div>              </li>':"")+"            </ul>"+"          </div>"+"        </div>"+""+'        <div class="pfc-footer">'+(e.options.show_powered_by?'          <p class="logo"><a href="http://www.phpfreechat.net" target="_blank">Powered by phpFreeChat</a></p>':"")+(e.options.loadTestData?'          <p class="ping">150ms</p>          <ul>            <li><div class="logout-btn" title="Logout"></div></li>            <li><div class="smiley-btn" title="Not implemented"></div></li>            <li><div class="sound-btn" title="Not implemented"></div></li>            <li><div class="online-btn"></div></li>          </ul>':"")+"        </div>"+""+'        <div class="pfc-compose">'+'          <textarea data-to="channel|xxx"></textarea>'+"        </div>"+""+'        <div class="pfc-modal-overlay"></div>'+'        <div class="pfc-modal-box"></div>'+""+'        <div class="pfc-ad-desktop"></div>'+'        <div class="pfc-ad-tablet"></div>'+'        <div class="pfc-ad-mobile"></div>'+"      </div>"),e.options.show_powered_by&&t.ajax({type:"GET",url:e.options.packageUrl}).done(function(n){t(e.element).find("p.logo a").attr("title","version "+n.version)}),t(".pfc-compose textarea").keydown(function(n){if(n.keyCode==13&&n.shiftKey===!1)return e.postToChannel(e.cid,t(".pfc-compose textarea").val()),t(".pfc-compose textarea").val(""),!1}),t(n).resize(function(){var e=parseInt(t(".pfc-compose textarea").css("border-right-width"),10),n=parseInt(t(".pfc-compose textarea").css("padding-right"),10)+parseInt(t(".pfc-compose textarea").css("padding-left"),10);t(".pfc-compose textarea").width(t(".pfc-compose").innerWidth()-e*2-n)}),t(n).unload(function(){e.notifyThatWindowIsClosed()}),e.modalbox.init(),e.options.loaded&&e.options.loaded(e),setTimeout(function(){t(e.element).trigger("pfc-loaded",[e])},0)},e.showErrorsPopup=function(n){var r=t('<ul class="pfc-errors"></ul>');n.forEach(function(e){r.append(t("<li></li>").text(e))}),e.modalbox.open(r)},e.loadResponsiveBehavior=function(){function c(){r.removeClass("pfc-tabs").addClass("pfc-mobile-tabs"),r.hide(),a==1&&(p(),a=0)}function h(){r.addClass("pfc-tabs").removeClass("pfc-mobile-tabs"),r.show(),a==1&&(p(),a=0)}function p(e){e&&r.slideUp(500),s.animate({top:"-="+o},500),i.animate({top:"-="+o},500)}function d(e){e&&r.slideDown(500),s.animate({top:"+="+o},500),i.animate({top:"+="+o},500)}function v(){i.hide()}function m(){i.css("width",u+"px").show()}function g(){var n=t(e.element).find(".pfc-messages"),r=0;n.each(function(e,n){r+=t(n).height()}),n.scrollTop(n.scrollTop()+r)}var r=t(".pfc-tabs"),i=t(".pfc-users"),s=t(".pfc-messages"),o=r.height(),u=i.width(),a=0,f=t("a.pfc-toggle-tabs"),l=t("a.pfc-toggle-users");t(n).resize(function(){f.is(":visible")?(c(),g()):h(),l.is(":visible")?(v(),g()):m()}),f.click(function(){r.removeClass("pfc-tabs").addClass("pfc-mobile-tabs"),o=r.height(),r.is(":visible")?(a=0,p(!0)):(a=1,d(!0))}),l.click(function(){i.is(":visible")?(i.animate({width:"-="+u},500),setTimeout(function(){i.hide()},500)):(i.css("width","0px").show(),i.animate({width:"+="+u},500))})},e}(phpFreeChat||{},jQuery,window),phpFreeChat=function(e,t,n,r){jQuery=t,e.md5=function(t){function n(e,t){return e<<t|e>>>32-t}function r(e,t){var n,r,i,s,o;return i=e&2147483648,s=t&2147483648,n=e&1073741824,r=t&1073741824,o=(e&1073741823)+(t&1073741823),n&r?o^2147483648^i^s:n|r?o&1073741824?o^3221225472^i^s:o^1073741824^i^s:o^i^s}function i(e,t,n){return e&t|~e&n}function s(e,t,n){return e&n|t&~n}function o(e,t,n){return e^t^n}function u(e,t,n){return t^(e|~n)}function a(e,t,s,o,u,a,f){return e=r(e,r(r(i(t,s,o),u),f)),r(n(e,a),t)}function f(e,t,i,o,u,a,f){return e=r(e,r(r(s(t,i,o),u),f)),r(n(e,a),t)}function l(e,t,i,s,u,a,f){return e=r(e,r(r(o(t,i,s),u),f)),r(n(e,a),t)}function c(e,t,i,s,o,a,f){return e=r(e,r(r(u(t,i,s),o),f)),r(n(e,a),t)}function h(e){var t,n=e.length,r=n+8,i=(r-r%64)/64,s=(i+1)*16,o=Array(s-1),u=0,a=0;while(a<n)t=(a-a%4)/4,u=a%4*8,o[t]=o[t]|e.charCodeAt(a)<<u,a++;return t=(a-a%4)/4,u=a%4*8,o[t]=o[t]|128<<u,o[s-2]=n<<3,o[s-1]=n>>>29,o}function p(e){var t="",n="",r,i;for(i=0;i<=3;i++)r=e>>>i*8&255,n="0"+r.toString(16),t+=n.substr(n.length-2,2);return t}function d(e){e=e.replace(/rn/g,"n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t}var v=Array(),m,g,y,b,w,E,S,x,T,N=7,C=12,k=17,L=22,A=5,O=9,M=14,_=20,D=4,P=11,H=16,B=23,j=6,F=10,I=15,q=21;t=d(t),v=h(t),E=1732584193,S=4023233417,x=2562383102,T=271733878;for(m=0;m<v.length;m+=16)g=E,y=S,b=x,w=T,E=a(E,S,x,T,v[m+0],N,3614090360),T=a(T,E,S,x,v[m+1],C,3905402710),x=a(x,T,E,S,v[m+2],k,606105819),S=a(S,x,T,E,v[m+3],L,3250441966),E=a(E,S,x,T,v[m+4],N,4118548399),T=a(T,E,S,x,v[m+5],C,1200080426),x=a(x,T,E,S,v[m+6],k,2821735955),S=a(S,x,T,E,v[m+7],L,4249261313),E=a(E,S,x,T,v[m+8],N,1770035416),T=a(T,E,S,x,v[m+9],C,2336552879),x=a(x,T,E,S,v[m+10],k,4294925233),S=a(S,x,T,E,v[m+11],L,2304563134),E=a(E,S,x,T,v[m+12],N,1804603682),T=a(T,E,S,x,v[m+13],C,4254626195),x=a(x,T,E,S,v[m+14],k,2792965006),S=a(S,x,T,E,v[m+15],L,1236535329),E=f(E,S,x,T,v[m+1],A,4129170786),T=f(T,E,S,x,v[m+6],O,3225465664),x=f(x,T,E,S,v[m+11],M,643717713),S=f(S,x,T,E,v[m+0],_,3921069994),E=f(E,S,x,T,v[m+5],A,3593408605),T=f(T,E,S,x,v[m+10],O,38016083),x=f(x,T,E,S,v[m+15],M,3634488961),S=f(S,x,T,E,v[m+4],_,3889429448),E=f(E,S,x,T,v[m+9],A,568446438),T=f(T,E,S,x,v[m+14],O,3275163606),x=f(x,T,E,S,v[m+3],M,4107603335),S=f(S,x,T,E,v[m+8],_,1163531501),E=f(E,S,x,T,v[m+13],A,2850285829),T=f(T,E,S,x,v[m+2],O,4243563512),x=f(x,T,E,S,v[m+7],M,1735328473),S=f(S,x,T,E,v[m+12],_,2368359562),E=l(E,S,x,T,v[m+5],D,4294588738),T=l(T,E,S,x,v[m+8],P,2272392833),x=l(x,T,E,S,v[m+11],H,1839030562),S=l(S,x,T,E,v[m+14],B,4259657740),E=l(E,S,x,T,v[m+1],D,2763975236),T=l(T,E,S,x,v[m+4],P,1272893353),x=l(x,T,E,S,v[m+7],H,4139469664),S=l(S,x,T,E,v[m+10],B,3200236656),E=l(E,S,x,T,v[m+13],D,681279174),T=l(T,E,S,x,v[m+0],P,3936430074),x=l(x,T,E,S,v[m+3],H,3572445317),S=l(S,x,T,E,v[m+6],B,76029189),E=l(E,S,x,T,v[m+9],D,3654602809),T=l(T,E,S,x,v[m+12],P,3873151461),x=l(x,T,E,S,v[m+15],H,530742520),S=l(S,x,T,E,v[m+2],B,3299628645),E=c(E,S,x,T,v[m+0],j,4096336452),T=c(T,E,S,x,v[m+7],F,1126891415),x=c(x,T,E,S,v[m+14],I,2878612391),S=c(S,x,T,E,v[m+5],q,4237533241),E=c(E,S,x,T,v[m+12],j,1700485571),T=c(T,E,S,x,v[m+3],F,2399980690),x=c(x,T,E,S,v[m+10],I,4293915773),S=c(S,x,T,E,v[m+1],q,2240044497),E=c(E,S,x,T,v[m+8],j,1873313359),T=c(T,E,S,x,v[m+15],F,4264355552),x=c(x,T,E,S,v[m+6],I,2734768916),S=c(S,x,T,E,v[m+13],q,1309151649),E=c(E,S,x,T,v[m+4],j,4149444226),T=c(T,E,S,x,v[m+11],F,3174756917),x=c(x,T,E,S,v[m+2],I,718787259),S=c(S,x,T,E,v[m+9],q,3951481745),E=r(E,g),S=r(S,y),x=r(x,b),T=r(T,w);var R=p(E)+p(S)+p(x)+p(T);return R.toLowerCase()};var i={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,s,o,u,a,f,l=0;e=i._utf8_encode(e);while(l<e.length)n=e.charCodeAt(l++),r=e.charCodeAt(l++),s=e.charCodeAt(l++),o=n>>2,u=(n&3)<<4|r>>4,a=(r&15)<<2|s>>6,f=s&63,isNaN(r)?a=f=64:isNaN(s)&&(f=64),t=t+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)+this._keyStr.charAt(f);return t},decode:function(e){var t="",n,r,s,o,u,a,f,l=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(l<e.length)o=this._keyStr.indexOf(e.charAt(l++)),u=this._keyStr.indexOf(e.charAt(l++)),a=this._keyStr.indexOf(e.charAt(l++)),f=this._keyStr.indexOf(e.charAt(l++)),n=o<<2|u>>4,r=(u&15)<<4|a>>2,s=(a&3)<<6|f,t+=String.fromCharCode(n),a!=64&&(t+=String.fromCharCode(r)),f!=64&&(t+=String.fromCharCode(s));return t=i._utf8_decode(t),t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}};return e.base64=i,e.modalbox={open:function(e){return e=t(e),t("div.pfc-modal-box *").remove(),t("div.pfc-modal-box").append(e).fadeIn(),t.browser.msie?t("div.pfc-modal-overlay").show():t("div.pfc-modal-overlay").fadeIn("fast"),t(n).trigger("resize"),e},close:function(e){e?(t("div.pfc-modal-box").hide(),t("div.pfc-modal-overlay").hide()):(t("div.pfc-modal-box").fadeOut(),t("div.pfc-modal-overlay").fadeOut("fast"))},init:function(){t(n).resize(function(){var n=t("div.pfc-modal-box"),r=t("div.pfc-modal-overlay");n.css({left:(r.outerWidth(!0)-n.outerWidth(!0))/2,top:(r.outerHeight(!0)-n.outerHeight(!0))/2})}).trigger("resize")}},e}(phpFreeChat||{},jQuery,window);